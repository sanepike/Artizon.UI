import{d as b,a as k,u as D,A as g,B as w,_ as L,r as V,b as d,o as u,e as a,C,f,D as v,E as c,n as h,t as m,i as y,g as A,w as P}from"./index-CjOS9C8z.js";import{authApi as $}from"./api-dTaot8wZ.js";const q=b({name:"LoginPage",setup(){const s=k(),e=D(),n=g(!1),l=g(""),r=w({email:"",password:""}),o=w({email:"",password:""}),p=()=>{let i=!0;return o.email="",o.password="",r.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(o.email="Please enter a valid email",i=!1):(o.email="Email is required",i=!1),r.password||(o.password="Password is required",i=!1),i};return{formData:r,errors:o,loading:n,error:l,handleLogin:async()=>{if(p()){n.value=!0,l.value="";try{const i=await $.login(r.email,r.password);e.setToken(i.access_token),await s.push("/")}catch{l.value="An error occurred. Please try again later."}finally{n.value=!1}}}}}}),B={class:"auth-container"},E={class:"auth-card"},N={class:"form-group"},S={key:0,class:"error-text"},T={class:"form-group"},z={key:0,class:"error-text"},M=["disabled"],U={key:0,class:"error-message"},_={class:"auth-link"};function F(s,e,n,l,r,o){const p=V("router-link");return u(),d("div",B,[a("div",E,[e[7]||(e[7]=a("h2",null,"Login to Artizons",-1)),a("form",{class:"auth-form",onSubmit:e[2]||(e[2]=C((...t)=>s.handleLogin&&s.handleLogin(...t),["prevent"]))},[a("div",N,[e[3]||(e[3]=a("label",{for:"email"},"Email",-1)),v(a("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=t=>s.formData.email=t),class:h({error:s.errors.email}),required:"",type:"email"},null,2),[[c,s.formData.email]]),s.errors.email?(u(),d("span",S,m(s.errors.email),1)):f("",!0)]),a("div",T,[e[4]||(e[4]=a("label",{for:"password"},"Password",-1)),v(a("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=t=>s.formData.password=t),class:h({error:s.errors.password}),required:"",type:"password"},null,2),[[c,s.formData.password]]),s.errors.password?(u(),d("span",z,m(s.errors.password),1)):f("",!0)]),a("button",{class:"submit-btn",disabled:s.loading,type:"submit"},m(s.loading?"Logging in...":"Login"),9,M),s.error?(u(),d("p",U,m(s.error),1)):f("",!0)],32),a("p",_,[e[6]||(e[6]=y(" Don't have an account? ",-1)),A(p,{to:"/auth/signup"},{default:P(()=>[...e[5]||(e[5]=[y("Sign up",-1)])]),_:1})])])])}const j=L(q,[["render",F],["__scopeId","data-v-1096ce1a"]]);export{j as default};
