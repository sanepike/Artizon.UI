import{d as _,_ as P,b as n,o as r,e as t,t as i,a as O,u as U,A as g,c as y,k as V,f,D as E,E as z,G as k,H as b,n as G,i as H,h as I}from"./index-CjOS9C8z.js";import{productsApi as R}from"./api-dTaot8wZ.js";import{u as Y}from"./cart-SGFbNxIs.js";const j=_({name:"ProductCard",props:{name:{type:String,required:!0},description:{type:String,required:!0},price:{type:Number,required:!0},imageUrl:{type:String,default:"/placeholder.png"}},emits:["add-to-cart"],setup(e,{emit:o}){return{handleAddToCart:()=>{o("add-to-cart")}}}}),J={class:"product-card"},K=["src"],W={class:"product-info"},X={class:"description"},Z={class:"price"};function x(e,o,l,m,C,c){return r(),n("div",J,[t("img",{alt:"Product Image",class:"product-image",src:e.imageUrl},null,8,K),t("div",W,[t("h3",null,i(e.name),1),t("p",X,i(e.description),1),t("div",Z,"â‚¹"+i(e.price.toFixed(2)),1),t("button",{class:"add-to-cart-btn",onClick:o[0]||(o[0]=(...u)=>e.handleAddToCart&&e.handleAddToCart(...u))}," Add to Cart ")])])}const $=P(j,[["render",x],["__scopeId","data-v-87da97e9"]]),ee=_({name:"CustomerDashboard",components:{ProductCard:$},setup(){const e=O(),o=U(),l=Y(),m=g([]),C=g(""),c=g(1),u=g(1),s=g(!1),p=g(!1),T=y(()=>o.user),A=y(()=>l),S=y(()=>{if(!C.value)return m.value;const a=C.value.toLowerCase();return m.value.filter(d=>d.name.toLowerCase().includes(a)||d.description.toLowerCase().includes(a))}),v=async()=>{s.value=!0;try{const a=await R.getProducts(c.value,10);m.value=a.products,u.value=a.total_pages}catch(a){console.error("Error fetching products:",a)}finally{s.value=!1}},q=a=>{const d=a.images?.[0]?.url||"/placeholder.png";l.add({id:a.id,name:a.name,price:a.price,image_urls:[d]})},w=a=>{l.remove(a)},F=a=>{const d=l.items.find(h=>h.id===a);d&&l.updateQuantity(a,d.quantity+1)},L=a=>{const d=l.items.find(h=>h.id===a);d&&d.quantity>1&&l.updateQuantity(a,d.quantity-1)},N=()=>{p.value=!p.value},Q=()=>{e.push("/cart")},B=()=>{e.push("/orders/customer")},D=()=>{c.value>1&&(c.value--,v())},M=()=>{c.value<u.value&&(c.value++,v())};return V(v),{products:m,search:C,page:c,totalPages:u,loading:s,isCartCollapsed:p,user:T,cart:A,filteredProducts:S,addToCart:q,removeFromCart:w,increaseQuantity:F,decreaseQuantity:L,toggleCart:N,goToCheckout:Q,goToOrders:B,prevPage:D,nextPage:M}}}),te={class:"customer-dashboard"},se={class:"dashboard-header"},oe={class:"dashboard-layout"},ae={class:"products-section"},re={class:"search-bar"},ne={key:0,class:"loading-state"},de={key:1,class:"products-list"},ie={key:2,class:"empty-state"},le={key:3,class:"pagination"},ce=["disabled"],ue=["disabled"],pe={key:0,class:"cart-badge"},me={class:"collapse-btn"},ge={key:0,class:"cart-content"},Ce={key:0,class:"cart-items"},ve=["alt","src"],he={class:"cart-item-details"},ye={class:"cart-item-price"},fe={class:"quantity-controls"},ke=["onClick"],be=["onClick"],_e=["onClick"],Pe={class:"cart-summary"},$e={class:"cart-total"},Te={key:1,class:"empty-cart"};function Ae(e,o,l,m,C,c){const u=$;return r(),n("div",te,[t("header",se,[o[6]||(o[6]=t("h1",null,"Browse Marketplace",-1)),t("button",{class:"orders-btn",onClick:o[0]||(o[0]=(...s)=>e.goToOrders&&e.goToOrders(...s))},"ðŸ“¦ My Orders")]),t("div",oe,[t("section",ae,[t("div",re,[E(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>e.search=s),placeholder:"Search products..."},null,512),[[z,e.search]])]),e.loading?(r(),n("div",ne,[...o[7]||(o[7]=[t("p",null,"Loading products...",-1)])])):e.filteredProducts.length>0?(r(),n("div",de,[(r(!0),n(k,null,b(e.filteredProducts,s=>(r(),I(u,{key:s.id,description:s.description,"image-url":s.images?.[0]?.url,name:s.name,price:s.price,onAddToCart:p=>e.addToCart(s)},null,8,["description","image-url","name","price","onAddToCart"]))),128))])):(r(),n("div",ie,[...o[8]||(o[8]=[t("p",null,"No products found.",-1)])])),e.totalPages>1?(r(),n("div",le,[t("button",{disabled:e.page===1,onClick:o[2]||(o[2]=(...s)=>e.prevPage&&e.prevPage(...s))},"Previous",8,ce),t("span",null,"Page "+i(e.page)+" of "+i(e.totalPages),1),t("button",{disabled:e.page===e.totalPages,onClick:o[3]||(o[3]=(...s)=>e.nextPage&&e.nextPage(...s))}," Next ",8,ue)])):f("",!0)]),t("aside",{class:G(["cart-panel",{collapsed:e.isCartCollapsed}])},[t("div",{class:"cart-header",onClick:o[4]||(o[4]=(...s)=>e.toggleCart&&e.toggleCart(...s))},[t("h2",null,[o[9]||(o[9]=H(" Shopping Cart ",-1)),e.cart.itemCount>0?(r(),n("span",pe,i(e.cart.itemCount),1)):f("",!0)]),t("button",me,i(e.isCartCollapsed?"â—€":"â–¶"),1)]),e.isCartCollapsed?f("",!0):(r(),n("div",ge,[e.cart.items.length>0?(r(),n("div",Ce,[(r(!0),n(k,null,b(e.cart.items,s=>(r(),n("div",{key:s.id,class:"cart-item"},[t("img",{alt:s.name,class:"cart-item-image",src:s.image_urls?.[0]||"/placeholder.png"},null,8,ve),t("div",he,[t("h4",null,i(s.name),1),t("p",ye,"â‚¹"+i(s.price.toFixed(2)),1),t("div",fe,[t("button",{onClick:p=>e.decreaseQuantity(s.id)},"-",8,ke),t("span",null,i(s.quantity),1),t("button",{onClick:p=>e.increaseQuantity(s.id)},"+",8,be)])]),t("button",{class:"remove-btn",onClick:p=>e.removeFromCart(s.id)}," âœ• ",8,_e)]))),128)),t("div",Pe,[t("div",$e,[o[10]||(o[10]=t("strong",null,"Total:",-1)),t("strong",null,"â‚¹"+i(e.cart.total.toFixed(2)),1)]),t("button",{class:"checkout-btn",onClick:o[5]||(o[5]=(...s)=>e.goToCheckout&&e.goToCheckout(...s))}," Proceed to Checkout ")])])):(r(),n("div",Te,[...o[11]||(o[11]=[t("p",null,"Your cart is empty",-1),t("p",{class:"empty-cart-hint"},"Add some products to get started!",-1)])]))]))],2)])])}const Fe=P(ee,[["render",Ae],["__scopeId","data-v-85b7a4ee"]]);export{Fe as default};
