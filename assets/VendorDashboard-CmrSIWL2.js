import{_ as b}from"./Modal-CATy3_Vg.js";import{d as M,a as O,A as a,k,_ as F,r as $,b as m,o as P,e as o,g,t as l,G as E,H as S,w as T}from"./index-CjOS9C8z.js";import{productsApi as i,ordersApi as D}from"./api-dTaot8wZ.js";import N from"./ProductForm-BMrHdOdr.js";const R=M({name:"VendorDashboard",components:{Modal:b,ProductForm:N},setup(){const e=O(),t=a([]),p=a(0),h=a(0),v=a(0),u=a(!1),d=a(null),c=async()=>{try{const r=await i.getProducts();t.value=r.products,p.value=r.products.length}catch(r){console.error("Error fetching products:",r)}},s=async()=>{try{const n=(await D.getVendorOrders(1,100)).orders||[];h.value=n.length,v.value=n.reduce((A,C)=>A+(C.total_amount||0),0)}catch(r){console.error("Error fetching vendor orders:",r)}},_=r=>{d.value=r,u.value=!0},w=async r=>{if(confirm("Are you sure you want to delete this product?"))try{await i.deleteProduct(r),await c()}catch(n){console.error("Error deleting product:",n)}},y=async r=>{try{await(d.value?i.updateProduct(d.value.id,r):i.createProduct(r)),await c(),f()}catch(n){console.error("Error saving product:",n)}},f=()=>{u.value=!1,d.value=null},V=()=>{e.push("/orders/vendor")};return k(()=>{c(),s()}),{products:t,totalProducts:p,totalOrders:h,totalRevenue:v,showAddProductModal:u,editingProduct:d,editProduct:_,deleteProduct:w,handleProductSubmit:y,closeProductModal:f,goToOrders:V}}}),B={class:"vendor-dashboard"},G={class:"dashboard-header"},H={class:"header-actions"},I={class:"dashboard-stats"},L={class:"stat-card"},U={class:"stat-card"},Y={class:"stat-card"},j={class:"products-section"},q={class:"products-grid"},z=["alt","src"],J={class:"product-info"},K={class:"text-body-2"},Q={class:"price"},W={class:"actions"},X=["onClick"];function Z(e,t,p,h,v,u){const d=$("ProductForm"),c=b;return P(),m("div",B,[o("header",G,[t[3]||(t[3]=o("h1",null,"Vendor Dashboard",-1)),o("div",H,[o("button",{class:"view-orders-btn",onClick:t[0]||(t[0]=(...s)=>e.goToOrders&&e.goToOrders(...s))}," ðŸ“¦ View Orders "),o("button",{class:"add-product-btn",onClick:t[1]||(t[1]=s=>e.showAddProductModal=!0)}," Add New Product ")])]),o("div",I,[o("div",L,[t[4]||(t[4]=o("h3",null,"Total Products",-1)),o("p",null,l(e.totalProducts),1)]),o("div",U,[t[5]||(t[5]=o("h3",null,"Total Orders",-1)),o("p",null,l(e.totalOrders),1)]),o("div",Y,[t[6]||(t[6]=o("h3",null,"Revenue",-1)),o("p",null,"â‚¹"+l(e.totalRevenue.toFixed(2)),1)])]),o("section",j,[t[7]||(t[7]=o("h2",null,"Your Products",-1)),o("div",q,[(P(!0),m(E,null,S(e.products,s=>(P(),m("div",{key:s.id,class:"product-card"},[o("img",{alt:s.name,src:s.images[0]?.url},null,8,z),o("div",J,[o("h3",null,l(s.name),1),o("div",K,l(s.description),1),o("div",Q,"â‚¹"+l(s.price.toFixed(2)),1),o("div",W,[o("button",{class:"delete-btn",onClick:_=>e.deleteProduct(s.id)}," Delete ",8,X)])])]))),128))])]),g(c,{modelValue:e.showAddProductModal,"onUpdate:modelValue":t[2]||(t[2]=s=>e.showAddProductModal=s),title:"Add New Product"},{default:T(()=>[g(d,{product:e.editingProduct,onCancel:e.closeProductModal,onSubmit:e.handleProductSubmit},null,8,["product","onCancel","onSubmit"])]),_:1},8,["modelValue"])])}const so=F(R,[["render",Z],["__scopeId","data-v-125aa141"]]);export{so as default};
