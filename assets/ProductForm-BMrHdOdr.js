import{d as w,A as g,B as h,k as F,_ as I,b as n,o as l,e as o,f as u,D as v,E as b,n as f,t as p,G as $,H as q,C as V}from"./index-CjOS9C8z.js";const L=w({name:"ProductForm",props:{product:{type:Object,default:()=>null}},emits:["submit","cancel"],setup(e,{emit:r}){const y=g(!1),m=g([]),a=g([]),i=h({name:"",description:"",price:0}),s=h({name:"",description:"",price:"",images:""}),c=t=>{const d=t.target;if(!d.files?.length)return;const k=Array.from(d.files);m.value=[...m.value,...k];for(const P of k){const S=URL.createObjectURL(P);a.value.push(S)}},D=t=>{if(!a.value||a.value.length===0||t>a.value.length)return;const d=a.value[t];d&&URL.revokeObjectURL(d),a.value.splice(t,1),m.value.splice(t,1)},C=()=>{let t=!0;return s.name="",s.description="",s.price="",s.images="",i.name.trim()||(s.name="Product name is required",t=!1),i.description.trim()||(s.description="Description is required",t=!1),(!i.price||i.price<=0)&&(s.price="Please enter a valid price",t=!1),!e.product&&m.value.length===0&&(s.images="At least one image is required",t=!1),t},U=()=>{if(!C())return;const t=new FormData;t.append("name",i.name),t.append("description",i.description),t.append("price",i.price.toString());for(const d of m.value)t.append("images",d);r("submit",t)};return F(()=>{e.product&&(i.name=e.product.name,i.description=e.product.description,i.price=e.product.price,a.value=e.product.image_urls)}),{formData:i,errors:s,loading:y,imageUrls:a,handleImageChange:c,removeImage:D,handleSubmit:U}}}),B={class:"form-group"},R={key:0,class:"error-text"},j={class:"form-group"},A={key:0,class:"error-text"},M={class:"form-group"},N={key:0,class:"error-text"},O={class:"form-group"},E={key:0,class:"error-text"},z={key:0,class:"image-preview"},G=["src"],H=["onClick"],T={class:"form-actions"},J=["disabled"];function K(e,r,y,m,a,i){return l(),n("form",{class:"product-form",onSubmit:r[5]||(r[5]=V((...s)=>e.handleSubmit&&e.handleSubmit(...s),["prevent"]))},[o("div",B,[r[6]||(r[6]=o("label",{for:"name"},"Product Name",-1)),v(o("input",{id:"name","onUpdate:modelValue":r[0]||(r[0]=s=>e.formData.name=s),class:f({error:e.errors.name}),required:"",type:"text"},null,2),[[b,e.formData.name]]),e.errors.name?(l(),n("span",R,p(e.errors.name),1)):u("",!0)]),o("div",j,[r[7]||(r[7]=o("label",{for:"description"},"Description",-1)),v(o("textarea",{id:"description","onUpdate:modelValue":r[1]||(r[1]=s=>e.formData.description=s),class:f({error:e.errors.description}),required:""},null,2),[[b,e.formData.description]]),e.errors.description?(l(),n("span",A,p(e.errors.description),1)):u("",!0)]),o("div",M,[r[8]||(r[8]=o("label",{for:"price"},"Price (₹)",-1)),v(o("input",{id:"price","onUpdate:modelValue":r[2]||(r[2]=s=>e.formData.price=s),class:f({error:e.errors.price}),min:"0",required:"",step:"0.01",type:"number"},null,2),[[b,e.formData.price,void 0,{number:!0}]]),e.errors.price?(l(),n("span",N,p(e.errors.price),1)):u("",!0)]),o("div",O,[r[9]||(r[9]=o("label",{for:"images"},"Product Images",-1)),o("input",{id:"images",accept:"image/*",class:f({error:e.errors.images}),multiple:"",type:"file",onChange:r[3]||(r[3]=(...s)=>e.handleImageChange&&e.handleImageChange(...s))},null,34),e.errors.images?(l(),n("span",E,p(e.errors.images),1)):u("",!0)]),e.imageUrls.length>0?(l(),n("div",z,[(l(!0),n($,null,q(e.imageUrls,(s,c)=>(l(),n("div",{key:c,class:"preview-item"},[o("img",{alt:"Product preview",src:s},null,8,G),o("button",{class:"remove-btn",type:"button",onClick:D=>e.removeImage(c)}," × ",8,H)]))),128))])):u("",!0),o("div",T,[o("button",{class:"cancel-btn",type:"button",onClick:r[4]||(r[4]=s=>e.$emit("cancel"))}," Cancel "),o("button",{class:"submit-btn",disabled:e.loading,type:"submit"},p(e.loading?"Saving...":"Save Product"),9,J)])],32)}const W=I(L,[["render",K],["__scopeId","data-v-d71241e9"]]);export{W as default};
