import{d as D,a as S,A as w,B as b,_,r as c,b as n,o as l,e as a,C as N,f as d,D as m,E as y,n as p,t as i,F as V,i as k,g as C,w as q}from"./index-CjOS9C8z.js";const P=D({name:"SignupPage",setup(){const s=S(),e=w(!1),u=w(""),o=b({first_name:"",last_name:"",email:"",password:"",user_type:""}),t=b({first_name:"",last_name:"",email:"",password:"",user_type:""}),g=()=>{let r=!0;for(const f of Object.keys(t))t[f]="";return o.first_name.trim()||(t.first_name="First name is required",r=!1),o.last_name.trim()||(t.last_name="Last name is required",r=!1),o.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(t.email="Please enter a valid email",r=!1):(t.email="Email is required",r=!1),o.password?o.password.length<6&&(t.password="Password must be at least 6 characters",r=!1):(t.password="Password is required",r=!1),o.user_type||(t.user_type="Please select an account type",r=!1),r};return{formData:o,errors:t,loading:e,error:u,handleSignup:async()=>{if(g()){e.value=!0,u.value="";try{const r=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),f=await r.json();r.status===201?(localStorage.setItem("access_token",f.access_token),await s.push("/")):u.value=f.message||"Failed to create account. Please try again."}catch{u.value="An error occurred. Please try again later."}finally{e.value=!1}}}}}}),h={class:"auth-container"},T={class:"auth-card"},U={class:"form-group"},A={key:0,class:"error-text"},E={class:"form-group"},F={key:0,class:"error-text"},O={class:"form-group"},$={key:0,class:"error-text"},B={class:"form-group"},M={key:0,class:"error-text"},j={class:"form-group"},L={key:0,class:"error-text"},R=["disabled"],I={key:0,class:"error-message"},z={class:"auth-link"};function J(s,e,u,o,t,g){const v=c("router-link");return l(),n("div",h,[a("div",T,[e[14]||(e[14]=a("h2",null,"Create an Account",-1)),a("form",{class:"auth-form",onSubmit:e[5]||(e[5]=N((...r)=>s.handleSignup&&s.handleSignup(...r),["prevent"]))},[a("div",U,[e[6]||(e[6]=a("label",{for:"firstName"},"First Name",-1)),m(a("input",{id:"firstName","onUpdate:modelValue":e[0]||(e[0]=r=>s.formData.first_name=r),class:p({error:s.errors.first_name}),required:"",type:"text"},null,2),[[y,s.formData.first_name]]),s.errors.first_name?(l(),n("span",A,i(s.errors.first_name),1)):d("",!0)]),a("div",E,[e[7]||(e[7]=a("label",{for:"lastName"},"Last Name",-1)),m(a("input",{id:"lastName","onUpdate:modelValue":e[1]||(e[1]=r=>s.formData.last_name=r),class:p({error:s.errors.last_name}),required:"",type:"text"},null,2),[[y,s.formData.last_name]]),s.errors.last_name?(l(),n("span",F,i(s.errors.last_name),1)):d("",!0)]),a("div",O,[e[8]||(e[8]=a("label",{for:"email"},"Email",-1)),m(a("input",{id:"email","onUpdate:modelValue":e[2]||(e[2]=r=>s.formData.email=r),class:p({error:s.errors.email}),required:"",type:"email"},null,2),[[y,s.formData.email]]),s.errors.email?(l(),n("span",$,i(s.errors.email),1)):d("",!0)]),a("div",B,[e[9]||(e[9]=a("label",{for:"password"},"Password",-1)),m(a("input",{id:"password","onUpdate:modelValue":e[3]||(e[3]=r=>s.formData.password=r),class:p({error:s.errors.password}),required:"",type:"password"},null,2),[[y,s.formData.password]]),s.errors.password?(l(),n("span",M,i(s.errors.password),1)):d("",!0)]),a("div",j,[e[11]||(e[11]=a("label",{for:"userType"},"Account Type",-1)),m(a("select",{id:"userType","onUpdate:modelValue":e[4]||(e[4]=r=>s.formData.user_type=r),class:p({error:s.errors.user_type}),required:""},[...e[10]||(e[10]=[a("option",{value:""},"Select account type",-1),a("option",{value:"CUSTOMER"},"Customer",-1),a("option",{value:"VENDOR"},"Vendor",-1)])],2),[[V,s.formData.user_type]]),s.errors.user_type?(l(),n("span",L,i(s.errors.user_type),1)):d("",!0)]),a("button",{class:"submit-btn",disabled:s.loading,type:"submit"},i(s.loading?"Creating Account...":"Sign Up"),9,R),s.error?(l(),n("p",I,i(s.error),1)):d("",!0)],32),a("p",z,[e[13]||(e[13]=k(" Already have an account? ",-1)),C(v,{to:"/auth/login"},{default:q(()=>[...e[12]||(e[12]=[k("Login",-1)])]),_:1})])])])}const H=_(P,[["render",J],["__scopeId","data-v-6f220ee7"]]);export{H as default};
