import{u as p}from"./index-CjOS9C8z.js";const g="https://artizon-api.onrender.com";async function r(e,t={}){const{method:a="GET",body:s,headers:n={},requiresAuth:i=!1}=t,c=p(),u={...n};if(i){const o=localStorage.getItem("access_token");o&&(u.Authorization=`Bearer ${o}`)}!u["Content-Type"]&&!(s instanceof FormData)&&(u["Content-Type"]="application/json");const h={method:a,headers:u,body:s instanceof FormData?s:s?JSON.stringify(s):void 0};try{const o=await fetch(`${g}${e}`,h);if(o.status===401&&i)throw c.logout(),window.location.href="/auth/login",new Error("Session expired. Please login again.");const d=await o.json();if(!o.ok)throw new Error(d.message||"An error occurred");return d}catch(o){throw new Error(o.message||"Network error occurred")}}const l={login:(e,t)=>r("/auth/login",{method:"POST",body:{email:e,password:t}}),signup:e=>r("/auth/signup",{method:"POST",body:e}),getProfile:()=>r("/auth/profile",{requiresAuth:!0})},A={getProducts:(e=1,t=10)=>r(`/products?page=${e}&limit=${t}`),getProduct:e=>r(`/products/${e}`),createProduct:e=>r("/products/create",{method:"POST",body:e,requiresAuth:!0}),updateProduct:(e,t)=>r(`/products/${e}`,{method:"PUT",body:t,requiresAuth:!0}),deleteProduct:e=>r(`/products/${e}`,{method:"DELETE",requiresAuth:!0})},f={placeOrder:e=>r("/orders/place",{method:"POST",body:e,requiresAuth:!0}),getMyOrders:(e=1,t=10)=>r(`/orders/my?page=${e}&limit=${t}`,{requiresAuth:!0}),getOrders:()=>r("/orders/my",{requiresAuth:!0}),getOrder:e=>r(`/orders/${e}`,{requiresAuth:!0}),getVendorOrders:(e=1,t=10)=>r(`/orders/vendor?page=${e}&limit=${t}`,{requiresAuth:!0}),updateOrderStatus:(e,t)=>r(`/orders/${e}/status`,{method:"PATCH",body:{status:t},requiresAuth:!0})};export{l as authApi,f as ordersApi,A as productsApi};
